<html>
<head>
  <title>Phusion Passenger: Node.js tutorial · phusion/passenger Wiki · GitHub</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/274061; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="946"/>
<h1>Phusion Passenger: Node.js tutorial · phusion/passenger Wiki · GitHub</h1>

<div><div><br/><div style="font-size: 16px"><div style="box-sizing:border-box;font-family:sans-serif;"><div style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13px;line-height:1.4;font-family:Helvetica, arial, freesans, clean, sans-serif, 'Segoe UI Emoji', 'Segoe UI Symbol';color:rgb(51, 51, 51);background-color:rgb(255, 255, 255);">
    <a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#start-of-content" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;height:1px;width:1px;clip:rect(1px 1px 1px 1px);overflow:hidden;position:absolute;margin:0px;">Skip to content</a>
    <div style="box-sizing:border-box;">
      
      
      
      


      
      <div style="box-sizing:border-box;padding-top:15px;padding-bottom:15px;min-width:1000px;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(229, 229, 229);background-color:rgb(245, 245, 245);">
  <div style="box-sizing:border-box;width:980px;margin-right:auto;margin-left:auto;"><span style="display:table;"></span>

    <a href="https://github.com/" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;position:relative;float:left;height:26px;margin-right:15px;">
      <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:32px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;height:26px;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:32px;font-family:octicons;line-height:1;"></span></span>
    </a>

    <div style="box-sizing:border-box;float:right;margin-top:-3px;margin-bottom:-3px;">
        <a href="https://github.com/join" style="box-sizing:border-box;background:transparent;color:rgb(255, 255, 255);text-decoration:none;position:relative;display:inline-block;padding:7px 12px;font-size:13px;font-weight:bold;text-shadow:rgba(0, 0, 0, 0.247059) 0px -1px 0px;white-space:nowrap;vertical-align:middle;cursor:pointer;border:1px solid rgb(213, 213, 213);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-user-select:none;-webkit-appearance:none;background-image:linear-gradient(rgb(138, 221, 109), rgb(96, 176, 68));background-color:rgb(96, 176, 68);background-repeat:repeat-x;border-color:rgb(92, 169, 65);margin-left:5px;">Sign up</a>
      <a href="https://github.com/login?return_to=%2Fphusion%2Fpassenger%2Fwiki%2FPhusion-Passenger%253A-Node.js-tutorial" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;position:relative;display:inline-block;padding:7px 12px;font-size:13px;font-weight:bold;text-shadow:rgba(255, 255, 255, 0.901961) 0px 1px 0px;white-space:nowrap;vertical-align:middle;cursor:pointer;border:1px solid rgb(213, 213, 213);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-user-select:none;-webkit-appearance:none;background-image:linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238));background-color:rgb(238, 238, 238);background-repeat:repeat-x;margin-left:5px;">Sign in</a>
    </div>

    <div style="box-sizing:border-box;position:relative;float:left;">
      <div style="box-sizing:border-box;position:relative;float:left;width:360px;margin-right:10px;"><div style="box-sizing:border-box;margin:0;padding:0;display:inline;"></div>
  
  <div style="box-sizing:border-box;position:absolute;top:3px;left:3px;bottom:3px;z-index:10;display:block;padding:3px 6px;font-size:12px;color:rgb(119, 119, 119);border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-right-radius:2px;border-bottom-left-radius:2px;transition:all 0.1s ease-in-out;-webkit-transition:all 0.1s ease-in-out;background-color:rgb(238, 238, 238);">This repository</div>
</div>
    </div>

      <ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:0px;float:left;list-style:none;">
          <li style="box-sizing:border-box;float:left;">
            <a href="https://github.com/explore" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;display:block;padding:4px 8px;font-size:13px;font-weight:bold;line-height:20px;">Explore</a>
          </li>
          <li style="box-sizing:border-box;float:left;">
            <a href="https://github.com/features" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;display:block;padding:4px 8px;font-size:13px;font-weight:bold;line-height:20px;">Features</a>
          </li>
          <li style="box-sizing:border-box;float:left;">
            <a href="https://enterprise.github.com/" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;display:block;padding:4px 8px;font-size:13px;font-weight:bold;line-height:20px;">Enterprise</a>
          </li>
          <li style="box-sizing:border-box;float:left;">
            <a href="https://github.com/blog" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;display:block;padding:4px 8px;font-size:13px;font-weight:bold;line-height:20px;">Blog</a>
          </li>
      </ul>

  <span style="display:table;clear:both;"></span></div>
</div>



      <div style="box-sizing:border-box;height:1px;width:1px;clip:rect(1px 1px 1px 1px);overflow:hidden;position:absolute;margin:0px;"></div>
          <div style="box-sizing:border-box;">
    <div style="box-sizing:border-box;">
      
    </div>
    <div style="box-sizing:border-box;position:relative;margin-bottom:20px;padding-top:20px;padding-bottom:20px;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238, 238, 238);">
      <div style="box-sizing:border-box;width:980px;margin-right:auto;margin-left:auto;"><span style="display:table;"></span>
        
<ul style="box-sizing:border-box;padding:0px;margin:0px;float:right;z-index:21;">


  <li style="box-sizing:border-box;list-style-type:none;font-size:11px;color:rgb(51, 51, 51);margin:0px 10px 0px 0px;float:left;">
      <a href="https://github.com/login?return_to=%2Fphusion%2Fpassenger" rel="nofollow" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;position:relative;display:inline-block;padding:0px 10px;font-size:13px;font-weight:bold;text-shadow:rgba(255, 255, 255, 0.901961) 0px 1px 0px;white-space:nowrap;vertical-align:middle;cursor:pointer;border:1px solid rgb(213, 213, 213);border-top-left-radius:3px;border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:3px;-webkit-user-select:none;-webkit-appearance:none;background-image:linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238));background-color:rgb(238, 238, 238);background-repeat:repeat-x;line-height:24px;float:left;"><span style="color:rgb(51, 51, 51);font-size:13px;font-weight:bold;white-space:nowrap;cursor:pointer;line-height:24px;position:absolute;z-index:1000001;display:none;width:0px;height:0px;pointer-events:none;border:5px solid transparent;top:-5px;right:50%;bottom:auto;margin-right:-5px;border-top-color:rgba(0, 0, 0, 0.8);"></span>
    <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;vertical-align:-1px;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:16px;font-family:octicons;line-height:1;"></span></span>
    Star
  <span style="color:rgb(51, 51, 51);font-size:13px;font-weight:bold;white-space:nowrap;cursor:pointer;line-height:24px;position:absolute;z-index:1000000;display:none;padding:5px 8px;font-style:normal;font-variant:normal;font-stretch:normal;font-family:Helvetica, arial, freesans, clean, sans-serif, 'Segoe UI Emoji', 'Segoe UI Symbol';text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;pointer-events:none;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-font-smoothing:subpixel-antialiased;background:rgba(0, 0, 0, 0.8);right:50%;bottom:100%;margin-bottom:5px;-webkit-transform:translateX(50%);transform:translateX(50%);">You must be signed in to star a repository</span></a>

    <a href="https://github.com/phusion/passenger/stargazers" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;float:left;padding:0px 7px;font-size:11px;font-weight:bold;line-height:24px;vertical-align:middle;border-width:1px 1px 1px 0px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-top-color:rgb(221, 221, 221);border-right-color:rgb(221, 221, 221);border-bottom-color:rgb(221, 221, 221);border-top-right-radius:3px;border-bottom-right-radius:3px;background-color:rgb(255, 255, 255);">
      2,292
    </a>

  </li>

    <li style="box-sizing:border-box;list-style-type:none;font-size:11px;color:rgb(51, 51, 51);margin:0px 10px 0px 0px;float:left;margin-right:0px;">
      <a href="https://github.com/login?return_to=%2Fphusion%2Fpassenger" rel="nofollow" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;position:relative;display:inline-block;padding:0px 10px;font-size:13px;font-weight:bold;text-shadow:rgba(255, 255, 255, 0.901961) 0px 1px 0px;white-space:nowrap;vertical-align:middle;cursor:pointer;border:1px solid rgb(213, 213, 213);border-top-left-radius:3px;border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:3px;-webkit-user-select:none;-webkit-appearance:none;background-image:linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238));background-color:rgb(238, 238, 238);background-repeat:repeat-x;line-height:24px;float:left;"><span style="color:rgb(51, 51, 51);font-size:13px;font-weight:bold;white-space:nowrap;cursor:pointer;line-height:24px;position:absolute;z-index:1000001;display:none;width:0px;height:0px;pointer-events:none;border:5px solid transparent;top:-5px;right:50%;bottom:auto;margin-right:-5px;border-top-color:rgba(0, 0, 0, 0.8);"></span>
        <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;vertical-align:-1px;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:16px;font-family:octicons;line-height:1;"></span></span>
        Fork
      <span style="color:rgb(51, 51, 51);font-size:13px;font-weight:bold;white-space:nowrap;cursor:pointer;line-height:24px;position:absolute;z-index:1000000;display:none;padding:5px 8px;font-style:normal;font-variant:normal;font-stretch:normal;font-family:Helvetica, arial, freesans, clean, sans-serif, 'Segoe UI Emoji', 'Segoe UI Symbol';text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;pointer-events:none;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-font-smoothing:subpixel-antialiased;background:rgba(0, 0, 0, 0.8);right:50%;bottom:100%;margin-bottom:5px;-webkit-transform:translateX(50%);transform:translateX(50%);">You must be signed in to fork a repository</span></a>
      <a href="https://github.com/phusion/passenger/network" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;float:left;padding:0px 7px;font-size:11px;font-weight:bold;line-height:24px;vertical-align:middle;border-width:1px 1px 1px 0px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-top-color:rgb(221, 221, 221);border-right-color:rgb(221, 221, 221);border-bottom-color:rgb(221, 221, 221);border-top-right-radius:3px;border-bottom-right-radius:3px;background-color:rgb(255, 255, 255);">
        330
      </a>
    </li>
</ul>

        <h1 style="box-sizing:border-box;font-size:20px;margin:0.67em 0px;margin-top:0px;margin-bottom:0px;line-height:28px;font-weight:normal;color:rgb(102, 102, 102);padding-left:34px;position:relative;float:left;">
          <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:32px;font-family:octicons;line-height:32px;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;position:absolute;left:0px;top:12px;margin-top:-13px;color:rgb(187, 187, 187);"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:32px;font-family:octicons;line-height:32px;color:rgb(187, 187, 187);"></span></span>
          <span style="box-sizing:border-box;"><a href="https://github.com/phusion" rel="author" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;white-space:nowrap;"><span style="box-sizing:border-box;">phusion</span></a></span><span style="box-sizing:border-box;margin:0px 0.25em;">/</span><strong style="box-sizing:border-box;font-weight:bold;"><a href="https://github.com/phusion/passenger" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;white-space:nowrap;">passenger</a></strong>

          

        </h1>
      <span style="display:table;clear:both;"></span></div>
    </div>

    <div style="box-sizing:border-box;width:980px;margin-right:auto;margin-left:auto;"><span style="display:table;"></span>
      <div style="box-sizing:border-box;min-height:345px;"><span style="display:table;"></span>
        <div style="box-sizing:border-box;float:right;width:38px;"><span style="display:table;"></span>
            
<div style="box-sizing:border-box;display:block;position:relative;padding-top:15px;padding-bottom:15px;box-shadow:rgb(238, 238, 238) 1px 0px 0px inset;background-image:linear-gradient(to right, rgb(246, 246, 246) 0%, rgb(255, 255, 255) 8px);"><span style="position:absolute;left:0px;width:100%;height:15px;background-color:transparent;top:0px;background-image:linear-gradient(rgb(255, 255, 255), rgba(255, 255, 255, 0));"></span>
  <ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:0px;list-style-type:none;">
    <li style="box-sizing:border-box;position:relative;"><span style="position:absolute;z-index:1000001;display:none;width:0px;height:0px;color:rgba(0, 0, 0, 0.8);pointer-events:none;border:5px solid transparent;top:50%;bottom:50%;left:-5px;margin-top:-5px;border-left-color:rgba(0, 0, 0, 0.8);"></span>
      <a href="https://github.com/phusion/passenger" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;display:block;padding:8px 10px;margin-top:5px;margin-bottom:5px;border:1px solid transparent;outline:0px;">
        <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;left:-1px;width:16px;color:rgb(153, 153, 153);text-align:center;transition:color 0.25s ease-in-out;-webkit-transition:color 0.25s ease-in-out;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:16px;font-family:octicons;line-height:1;color:rgb(153, 153, 153);text-align:center;"></span></span> 
        
</a>    <span style="position:absolute;z-index:1000000;display:none;padding:5px 8px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:11px;line-height:1.5;font-family:Helvetica, arial, freesans, clean, sans-serif, 'Segoe UI Emoji', 'Segoe UI Symbol';color:rgb(255, 255, 255);text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-font-smoothing:subpixel-antialiased;background:rgba(0, 0, 0, 0.8);right:100%;bottom:50%;margin-right:5px;-webkit-transform:translateY(50%);transform:translateY(50%);">Code</span></li>

      <li style="box-sizing:border-box;position:relative;"><span style="position:absolute;z-index:1000001;display:none;width:0px;height:0px;color:rgba(0, 0, 0, 0.8);pointer-events:none;border:5px solid transparent;top:50%;bottom:50%;left:-5px;margin-top:-5px;border-left-color:rgba(0, 0, 0, 0.8);"></span>
        <a href="https://github.com/phusion/passenger/issues" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;display:block;padding:8px 10px;margin-top:5px;margin-bottom:5px;border:1px solid transparent;outline:0px;">
          <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;left:-1px;width:16px;color:rgb(153, 153, 153);text-align:center;transition:color 0.25s ease-in-out;-webkit-transition:color 0.25s ease-in-out;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:16px;font-family:octicons;line-height:1;color:rgb(153, 153, 153);text-align:center;"></span></span> 
          <span style="box-sizing:border-box;"></span>
          
</a>      <span style="position:absolute;z-index:1000000;display:none;padding:5px 8px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:11px;line-height:1.5;font-family:Helvetica, arial, freesans, clean, sans-serif, 'Segoe UI Emoji', 'Segoe UI Symbol';color:rgb(255, 255, 255);text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-font-smoothing:subpixel-antialiased;background:rgba(0, 0, 0, 0.8);right:100%;bottom:50%;margin-right:5px;-webkit-transform:translateY(50%);transform:translateY(50%);">Issues</span></li>

    <li style="box-sizing:border-box;position:relative;"><span style="position:absolute;z-index:1000001;display:none;width:0px;height:0px;color:rgba(0, 0, 0, 0.8);pointer-events:none;border:5px solid transparent;top:50%;bottom:50%;left:-5px;margin-top:-5px;border-left-color:rgba(0, 0, 0, 0.8);"></span>
      <a href="https://github.com/phusion/passenger/pulls" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;display:block;padding:8px 10px;margin-top:5px;margin-bottom:5px;border:1px solid transparent;outline:0px;">
          <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;left:-1px;width:16px;color:rgb(153, 153, 153);text-align:center;transition:color 0.25s ease-in-out;-webkit-transition:color 0.25s ease-in-out;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:16px;font-family:octicons;line-height:1;color:rgb(153, 153, 153);text-align:center;"></span></span> 
          <span style="box-sizing:border-box;"></span>
          
</a>    <span style="position:absolute;z-index:1000000;display:none;padding:5px 8px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:11px;line-height:1.5;font-family:Helvetica, arial, freesans, clean, sans-serif, 'Segoe UI Emoji', 'Segoe UI Symbol';color:rgb(255, 255, 255);text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-font-smoothing:subpixel-antialiased;background:rgba(0, 0, 0, 0.8);right:100%;bottom:50%;margin-right:5px;-webkit-transform:translateY(50%);transform:translateY(50%);">Pull Requests</span></li>


      <li style="box-sizing:border-box;position:relative;"><span style="position:absolute;z-index:1000001;display:none;width:0px;height:0px;color:rgba(0, 0, 0, 0.8);pointer-events:none;border:5px solid transparent;top:50%;bottom:50%;left:-5px;margin-top:-5px;border-left-color:rgba(0, 0, 0, 0.8);"></span>
        <a href="https://github.com/phusion/passenger/wiki" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;display:block;padding:8px 10px;margin-top:5px;margin-bottom:5px;border:1px solid transparent;outline:0px;font-weight:bold;border-color:rgb(238, 238, 238) rgb(238, 238, 238) rgb(238, 238, 238) transparent;border-top-left-radius:0px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:0px;box-shadow:rgba(0, 0, 0, 0.0470588) 1px 1px 3px;background-color:rgb(255, 255, 255);">
          <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;left:-1px;width:16px;color:rgb(51, 51, 51);text-align:center;transition:color 0.25s ease-in-out;-webkit-transition:color 0.25s ease-in-out;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:16px;font-family:octicons;line-height:1;color:rgb(51, 51, 51);text-align:center;"></span></span> 
          
<span style="color:rgb(51, 51, 51);font-weight:bold;position:absolute;top:0px;right:0px;bottom:0px;width:3px;border-top-left-radius:0px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:0px;background-color:rgb(210, 105, 17);"></span></a>      <span style="position:absolute;z-index:1000000;display:none;padding:5px 8px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:11px;line-height:1.5;font-family:Helvetica, arial, freesans, clean, sans-serif, 'Segoe UI Emoji', 'Segoe UI Symbol';color:rgb(255, 255, 255);text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-font-smoothing:subpixel-antialiased;background:rgba(0, 0, 0, 0.8);right:100%;bottom:50%;margin-right:5px;-webkit-transform:translateY(50%);transform:translateY(50%);">Wiki</span></li>
  </ul>
  <div style="box-sizing:border-box;position:relative;height:5px;margin:8px 0px 6px 1px;background-image:radial-gradient(farthest-side at 0% 0%, rgb(244, 244, 244), rgba(244, 244, 244, 0));"><span style="position:absolute;top:0px;width:100%;height:1px;background-image:linear-gradient(to right, rgb(238, 238, 238) 70%, rgb(255, 255, 255) 100%);"></span></div>
  <ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:0px;list-style-type:none;">

    <li style="box-sizing:border-box;position:relative;"><span style="position:absolute;z-index:1000001;display:none;width:0px;height:0px;color:rgba(0, 0, 0, 0.8);pointer-events:none;border:5px solid transparent;top:50%;bottom:50%;left:-5px;margin-top:-5px;border-left-color:rgba(0, 0, 0, 0.8);"></span>
      <a href="https://github.com/phusion/passenger/pulse/weekly" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;display:block;padding:8px 10px;margin-top:5px;margin-bottom:5px;border:1px solid transparent;outline:0px;">
        <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;left:-1px;width:16px;color:rgb(153, 153, 153);text-align:center;transition:color 0.25s ease-in-out;-webkit-transition:color 0.25s ease-in-out;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:16px;font-family:octicons;line-height:1;color:rgb(153, 153, 153);text-align:center;"></span></span> 
        
</a>    <span style="position:absolute;z-index:1000000;display:none;padding:5px 8px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:11px;line-height:1.5;font-family:Helvetica, arial, freesans, clean, sans-serif, 'Segoe UI Emoji', 'Segoe UI Symbol';color:rgb(255, 255, 255);text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-font-smoothing:subpixel-antialiased;background:rgba(0, 0, 0, 0.8);right:100%;bottom:50%;margin-right:5px;-webkit-transform:translateY(50%);transform:translateY(50%);">Pulse</span></li>

    <li style="box-sizing:border-box;position:relative;"><span style="position:absolute;z-index:1000001;display:none;width:0px;height:0px;color:rgba(0, 0, 0, 0.8);pointer-events:none;border:5px solid transparent;top:50%;bottom:50%;left:-5px;margin-top:-5px;border-left-color:rgba(0, 0, 0, 0.8);"></span>
      <a href="https://github.com/phusion/passenger/graphs" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;display:block;padding:8px 10px;margin-top:5px;margin-bottom:5px;border:1px solid transparent;outline:0px;">
        <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;left:-1px;width:16px;color:rgb(153, 153, 153);text-align:center;transition:color 0.25s ease-in-out;-webkit-transition:color 0.25s ease-in-out;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:16px;font-family:octicons;line-height:1;color:rgb(153, 153, 153);text-align:center;"></span></span> 
        
</a>    <span style="position:absolute;z-index:1000000;display:none;padding:5px 8px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:11px;line-height:1.5;font-family:Helvetica, arial, freesans, clean, sans-serif, 'Segoe UI Emoji', 'Segoe UI Symbol';color:rgb(255, 255, 255);text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-font-smoothing:subpixel-antialiased;background:rgba(0, 0, 0, 0.8);right:100%;bottom:50%;margin-right:5px;-webkit-transform:translateY(50%);transform:translateY(50%);">Graphs</span></li>
  </ul>


<span style="position:absolute;left:0px;width:100%;height:15px;background-color:transparent;bottom:0px;background-image:linear-gradient(rgba(255, 255, 255, 0), rgb(255, 255, 255));"></span></div>

              
        <span style="display:table;clear:both;"></span></div>

        <div style="box-sizing:border-box;float:left;width:920px;">
          

<div style="box-sizing:border-box;">
<div style="box-sizing:border-box;">
  <div style="box-sizing:border-box;">
      <div style="box-sizing:border-box;float:right;margin-top:3px;">
      </div>
    <h1 style="box-sizing:border-box;font-size:30px;margin:0.67em 0px;margin-top:0px;margin-bottom:0px;line-height:1.1;margin-right:150px;font-weight:normal;word-wrap:break-word;">Phusion Passenger: Node.js tutorial</h1>
      <div style="box-sizing:border-box;margin-top:6px;font-size:14px;line-height:20px;color:rgb(119, 119, 119);padding-bottom:15px;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238, 238, 238);">
        FooBarWidget edited this page <span style="box-sizing:border-box;" title="Sep 24, 2014, 1:23 PM GMT+1">on Sep 24</span>
        ·
        <a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger:-Node.js-tutorial/_history" style="box-sizing:border-box;background:transparent;color:inherit;text-decoration:none;">
          95 revisions
        </a>
      </div>
  </div>
</div>
<div style="box-sizing:border-box;clear:both;">
  <div style="box-sizing:border-box;">

  <div style="box-sizing:border-box;float:right;width:230px;">
    <div style="box-sizing:border-box;position:relative;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;margin-bottom:30px;">
      
<h3 style="box-sizing:border-box;line-height:17px;font-size:14px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:0px;border-bottom-left-radius:0px;border-width:1px 1px 0px;border-top-style:solid;border-right-style:solid;border-left-style:solid;border-top-color:rgb(216, 216, 216);border-right-color:rgb(216, 216, 216);border-left-color:rgb(216, 216, 216);padding:9px 10px 10px;display:block;background-color:rgb(241, 241, 241);box-shadow:rgba(0, 0, 0, 0.0588235) 0px 1px 2px;background-image:linear-gradient(rgb(250, 250, 250), rgb(241, 241, 241));background-size:100% 50px;background-repeat:no-repeat;cursor:pointer;">
  <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:16px;font-family:octicons;line-height:1;"></span></span>
  
  Pages <span style="box-sizing:border-box;display:inline-block;padding:2px 5px;font-size:11px;font-weight:bold;line-height:1;color:rgb(255, 255, 255);border-top-left-radius:20px;border-top-right-radius:20px;border-bottom-right-radius:20px;border-bottom-left-radius:20px;background-color:rgb(186, 190, 192);">14</span>
</h3>
<div style="box-sizing:border-box;padding:0px;border:1px solid rgb(216, 216, 216);border-bottom-left-radius:3px;border-bottom-right-radius:3px;color:rgb(102, 102, 102);font-size:13px;background:rgb(255, 255, 255);box-shadow:rgba(0, 0, 0, 0.0588235) 0px 1px 2px;">

  <ul style="box-sizing:border-box;padding:0px;margin:0px;list-style-type:none;">
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Contribution-Campaign" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Contribution Campaign</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Debugging-application-startup-problems" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Debugging application startup problems</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Free-style-Node.js-structure" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Free style Node.js structure</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Home</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Misc-FAQs" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Misc FAQs</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Node.js" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Node.js</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Node.js-marketing-campaign" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Node.js marketing campaign</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger-and-logrotation" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Phusion Passenger and logrotation</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger:-Meteor-tutorial" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Phusion Passenger: Meteor tutorial</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger:-Node.js-tutorial" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Phusion Passenger: Node.js tutorial</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Puma-vs-Phusion-Passenger" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Puma vs Phusion Passenger</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Resetting-RVM-gemsets" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Resetting RVM gemsets</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Unicorn-vs-Phusion-Passenger" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Unicorn vs Phusion Passenger</a></strong>
    </li>
    <li style="box-sizing:border-box;padding:6px 10px;">
      <strong style="box-sizing:border-box;font-weight:bold;color:rgb(51, 51, 51);"><a href="https://github.com/phusion/passenger/wiki/Why-can't-Phusion-Passenger-extend-my-existing-Nginx%3F" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;word-wrap:break-word;">Why can't Phusion Passenger extend my existing Nginx?</a></strong>
    </li>
  </ul>
</div>

    </div>


    <div style="box-sizing:border-box;">
      <h5 style="box-sizing:border-box;margin-top:0px;margin-bottom:10px;line-height:1.1;font-size:12px;">Clone this wiki locally</h5>
      <div style="box-sizing:border-box;display:table;width:100%;">
        
        <span style="box-sizing:border-box;display:table-cell;width:1%;vertical-align:middle;">
          
        </span>
      </div>


        <a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorialgithub-windows://openRepo/https://github.com/phusion/passenger.wiki.git" style="box-sizing:border-box;background:transparent;color:rgb(51, 51, 51);text-decoration:none;position:relative;display:inline-block;padding:0px 10px;font-size:13px;font-weight:bold;text-shadow:rgba(255, 255, 255, 0.901961) 0px 1px 0px;white-space:nowrap;vertical-align:middle;cursor:pointer;border:1px solid rgb(213, 213, 213);border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-user-select:none;-webkit-appearance:none;background-image:linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238));background-color:rgb(238, 238, 238);background-repeat:repeat-x;line-height:24px;margin-top:10px;" title="Save this wiki to your computer and use it in GitHub Desktop.">
          <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;vertical-align:-1px;"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:16px;font-family:octicons;line-height:1;"></span></span>
          Clone in Desktop
        </a>
    </div>
  </div>

  <div style="box-sizing:border-box;margin-top:20px;margin-right:280px;">
    <div style="box-sizing:border-box;overflow:hidden;font-family:'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif;font-size:16px;line-height:1.6;word-wrap:break-word;padding:0px 30px;margin:0px -30px;word-break:break-word;">
      <p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a href="https://www.phusionpassenger.com/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Phusion Passenger™</a> is an open source, polyglot (multi-language) application manager. It takes a lot of complexity out of deploying Node.js, and adds powerful enterprise-grade features that are useful in production. It also makes it administering Node.js apps much easier. It has already done this for Ruby, Python and Meteor, and is being used by high-profile companies such as <strong style="box-sizing:border-box;font-weight:bold;">Apple, Pixar, New York Times, AirBnB, Juniper</strong> etc as well as <a href="http://trends.builtwith.com/Web-Server/Phusion-Passenger" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">over 350.000 websites</a>.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a href="http://vimeo.com/phusionnl/review/84945384/73fe7432ee" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"><img src="Phusion Passenger Node.js tutorial · phusionp_files/687474703a2f2f626c6f672e70687573696f6e2e6e6c2f77702d636f6e74656e742f75706c6f6164732f323031342f30312f646f746a7374616c6b2e6a7067.jpg" type="image/jpeg" height="327" style="box-sizing:border-box;border:0px;max-width:100%;" width="580"/></a></p><em style="box-sizing:border-box;">5 minute intro: Making node.js deployment enjoyable (DotJS Paris 2013)</em>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a href="https://twitter.com/kidkarolis/status/427419356637581313" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"><img src="Phusion Passenger Node.js tutorial · phusionp_files/687474703a2f2f626c6f672e70687573696f6e2e6e6c2f77702d636f6e74656e742f75706c6f6164732f323031342f30312f70617373656e6765725f6e6f64655f74776565742e706e67.png" type="image/png" height="233" style="box-sizing:border-box;border:0px;max-width:100%;" width="518"/></a></p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">Learn more:</strong> <a href="https://www.phusionpassenger.com/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Website</a> | <a href="https://www.phusionpassenger.com/documentation_and_support" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Documentation</a> | <a href="https://www.phusionpassenger.com/documentation_and_support" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Support resources</a> | <a href="https://github.com/phusion/passenger" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Github</a> | <a href="https://twitter.com/phusion_nl" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Twitter</a> | <a href="http://blog.phusion.nl/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Blog</a></p>

<img src="Phusion Passenger Node.js tutorial · phusionp_files/687474703a2f2f626c6f672e70687573696f6e2e6e6c2f77702d636f6e74656e742f75706c6f6164732f323031332f31302f6e6f64656c6f676f2e706e67.png" type="image/png" alt="Node.js" height="150" style="box-sizing:border-box;border:0px;max-width:100%;" width="438"/><img src="Phusion Passenger Node.js tutorial · phusionp_files/687474703a2f2f626c6f672e70687573696f6e2e6e6c2f77702d636f6e74656e742f75706c6f6164732f323031322f30372f50617373656e6765725f63686169725f323536783235362e6a7067.jpg" type="image/jpeg" alt="Phusion Passenger" height="150" style="box-sizing:border-box;border:0px;max-width:100%;" width="150"/>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">Table of contents</strong></p>

<ol style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#understanding_passenger" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Understanding Phusion Passenger</a>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:0px;padding-left:2em;">
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#why" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Why use Node.js on Passenger?</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#how_does_it_work" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">How does it work?</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#multiple_integration_modes" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Multiple integration modes</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#what_passenger_doesnt_do" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">What Passenger doesn't do</a></li>
</ul>
</li>
<li style="box-sizing:border-box;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#getting_started" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Getting started</a>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:0px;padding-left:2em;">
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#installing" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Installing</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#prepare_your_app" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Prepare your app</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#example_app" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Example app</a></li>
</ul>
</li>
<li style="box-sizing:border-box;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#understanding_what_happened" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Understanding what happened</a>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:0px;padding-left:2em;">
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#port_binding" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Port binding</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#changing_the_port" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Changing the port</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#process_spawning" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Process spawning</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#max_number_of_processes" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Maximum number of processes</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#process_supervision" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Process supervision</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#characteristics_multi_process" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">The characteristics of having multiple processes</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#node_env" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">NODE_ENV</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#further_configuration" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Further configuration</a></li>
</ul>
</li>
<li style="box-sizing:border-box;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#deploying_to_production" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Deploying to production</a>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:0px;padding-left:2em;">
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#deploying_standalone" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Deploying Standalone</a></li>
<li style="box-sizing:border-box;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#deploying_on_nginx_or_apache" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Deploying on Nginx or Apache</a>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:0px;padding-left:2em;">
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#first_request_is_slower" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">The first request is slower</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#node_env_production_default" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">NODE_ENV is set to production by default</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#configuring_nginx_apache_mode" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Configuration</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#automatic_user_switching" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Automatic user switching</a></li>
</ul>
</li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#restarting_an_app" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Redeploying (restarting) an application</a></li>
</ul>
</li>
<li style="box-sizing:border-box;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#using_passenger_in_dev" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Using Passenger in development</a>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:0px;padding-left:2em;">
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#should_use_passenger_in_development" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Should Passenger be used in development as well?</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#restarting_on_every_request" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Restarting your application on every request</a></li>
</ul>
</li>
<li style="box-sizing:border-box;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#caveats" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Caveats</a>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:0px;padding-left:2em;">
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#dont_mess_with_stdout_or_stderr" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Don't mess with stdout or stderr</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#close_event_not_work" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">The <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>close<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> event might not work as expected</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#restarting_apps_that_serve_long_running_connections" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Restarting apps that serve WebSocket or other long-running connections</a></li>
</ul>
</li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#management_and_inspection" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Management and inspection</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#troubleshooting" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Troubleshooting</a></li>
<li style="box-sizing:border-box;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#conclusion" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Conclusion</a>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:0px;padding-left:2em;">
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#background" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Passenger's background: where did it come from?</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#further_reading" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Further reading</a></li>
<li style="box-sizing:border-box;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#feedback" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Your feedback is valuable!</a></li>
</ul>
</li>
</ol><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-understanding_passenger" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h2 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.225;font-size:1.75em;position:relative;font-weight:bold;padding-bottom:0.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238, 238, 238);">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#1-understanding-passenger" name="user-content-1-understanding-passenger" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>1. Understanding Passenger</h2>

<img src="Phusion Passenger Node.js tutorial · phusionp_files/687474703a2f2f626c6f672e70687573696f6e2e6e6c2f77702d636f6e74656e742f75706c6f6164732f323031332f31312f70617373656e6765725f6e6f64652e706e67.png" type="image/png" height="159" style="box-sizing:border-box;border:0px;max-width:100%;" width="600"/><br style="box-sizing:border-box;"/><em style="box-sizing:border-box;">Phusion Passenger wraps Node.js, makes it simpler to deploy,<br style="box-sizing:border-box;"/>adds management tools and other useful production features.</em>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-why" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#why-use-nodejs-on-passenger" name="user-content-why-use-nodejs-on-passenger" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Why use Node.js on Passenger?</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Here are some of the benefits that you will gain:</p>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">
<p style="box-sizing:border-box;margin-top:16px;margin-bottom:16px;"><strong style="box-sizing:border-box;font-weight:bold;">The power of Nginx</strong><br style="box-sizing:border-box;"/>
Phusion Passenger combines Node.js with the increasingly popular <a href="http://nginx.org/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Nginx web server</a>. By combining them, Nginx will offload Node.js from serving static assets. This also adds a buffering reverse proxy layer which provides I/O security and protects Node.js against invalid HTTP requests, slow clients, etc. It will even allow you to use SSL without having to code explicit SSL support in your Node app.</p>

<p style="box-sizing:border-box;margin-top:16px;margin-bottom:16px;">Nginx isn't the only thing supported though. Passenger also supports Apache, and can even run standalone without needing an existing web server.</p>
</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">Multitenancy</strong><br style="box-sizing:border-box;"/>
Run multiple Node.js applications on a single server easily and without hassle.</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">Process management and supervision</strong><br style="box-sizing:border-box;"/>
Node.js processes are automatically started, and automatically restarted when they crash.</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">Statistics and insight</strong><br style="box-sizing:border-box;"/>
Phusion Passenger provides tools for inspecting the applications' status, such what requests they're currently processing, how many requests they've processed.</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">Scaling and load balancing</strong><br style="box-sizing:border-box;"/>
Based on current traffic, Phusion Passenger can spawn more Node.js processes to handle the load, or spin down some existing Node.js processes to conserve resources. Phusion Passenger automatically load balances traffic across Node.js process. The load balancing mechanism utilizes a smart &quot;first-available&quot; selection algorithm to avoid problems caused by slow requests. Although Node.js is single-threaded, this approach allows you to utilize multiple CPU cores.</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">I/O security</strong><br style="box-sizing:border-box;"/>
Node.js is automatically put behind a buffering web server, such as Nginx or Apache, which preprocesses and postprocesses HTTP requests and responses. This protects the Node.js app against slow-client attacks such as Slowloris. It also provides a secure environment which sanitizes HTTP headers, to protect against vulnerabilities in the app's HTTP parser.</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">System security</strong><br style="box-sizing:border-box;"/>
Node.js processes are automatically started as the user which owns the app. This allows the OS to separate their privileges, so that a vulnerability in one app does not affect another.</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">Static file acceleration</strong><br style="box-sizing:border-box;"/>
Static files are directly served by the web server (Nginx/Apache), not by Node.js. This offloads the Node.js application from handling those things.</li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Phusion Passenger is quite small and fast, being written in optimized C++. It’s a lightweight tool which drastically reduces complexity in your production environments.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">How’s this any different from putting Node.js behind an Nginx reverse proxy yourself?</p>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">Using Phusion Passenger is much easier. If you do it yourself, you’ll have to write reverse proxy rules, write init scripts, setup process supervision, etc. The result probably does not even handle corner cases properly. Phusion Passenger takes care of all this for you and handles virtually all the corner cases. This reduces the number of moving parts and reduces complexity.</li>
<li style="box-sizing:border-box;">Phusion Passenger integrates much deeper into Nginx than a straight reverse proxy does, and as such can leverage Nginx features much better. For example, the load balancing and response buffering in Phusion Passenger is much better than the one you get with manual reverse proxying.</li>
<li style="box-sizing:border-box;">By using Nginx’s proxy module, it’s very hard to see what’s going on with the system right now. Are all connections ok? Are all processes ok? Phusion Passenger provides simple and powerful administration tools that can help you with that.</li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-how_does_it_work" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#how-does-it-work" name="user-content-how-does-it-work" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>How does it work?</h3>

<img src="Phusion Passenger Node.js tutorial · phusionp_files/687474703a2f2f626c6f672e70687573696f6e2e6e6c2f77702d636f6e74656e742f75706c6f6164732f323031332f31302f70617373656e6765725f6e6f64655f6172636869746563747572652e706e67.png" type="image/png" height="431" style="box-sizing:border-box;border:0px;max-width:100%;" width="700"/>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Instead of using Node.js directly, you use Phusion Passenger, which in turn manages Node.js.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Passenger and Nginx form an integrated whole. As a user, you don't deal with Passenger and Nginx separately: you deal with both of them at the same time. This makes the system considerably easier to administer. You configure Passenger by editing the Nginx configuration file. You start and shutdown Passenger by starting and shutting down Nginx.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Passenger and Nginx receive requests and forwards them to Node.js. Passenger internally sets up Nginx reverse proxy rules. This reverse proxy layer sanitizes HTTP headers and provides buffering, which protects Node.js against slow clients.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Further under the hood, Passenger manages multiple Node.js processes and load balances traffic amongst them. If a process crashes, it is restarted. By using multiple processes, Passenger allows you to take advantage of multiple CPU cores (1 process can use 1 core), even though Node.js is single-threaded. Again, you never have to deal with all the Node.js processes individually. You only deal with Passenger, which takes care of all this for you.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Any requests that can be mapped to a static file on disk, will be handled immediately by Nginx, and the request never reaches Node.js. Nginx is highly optimized at serving static files, and does a much better job at it than Node.js. This offloads Node.js for only the most important requests, namely the dynamic ones.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Passenger also introduces a management and inspection console. Normally it's very hard to see what your Node.js app is doing. What request is it handling? How much CPU and memory is it using? Is it maybe stuck or malfunctioning? Is it under heavy load? Because Passenger keeps score of statistics, all these questions can be answered with the Passenger management and inspection tools.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Some readers may immediately recognize that <strong style="box-sizing:border-box;font-weight:bold;">Passenger is Unix</strong>. This is a traditional Unix process supervision architecture. The architecture leverages a lot of powerful Unix features. For example, the communication links between Passenger and Node.js are not TCP sockets, but are high-performance Unix domain sockets. The supervision code utilizes POSIX process management APIs.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-multiple_integration_modes" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#multiple-integration-modes" name="user-content-multiple-integration-modes" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Multiple integration modes</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Note that &quot;Nginx&quot; in the previous diagram can be replaced by &quot;Apache&quot;. This is because Passenger supports three modes:</p>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">An Nginx integration mode, which works as previously described.</li>
<li style="box-sizing:border-box;">An Apache integration mode, which is exactly like the Nginx integration mode, but with Apache.</li>
<li style="box-sizing:border-box;">A Standalone mode. Whereas the Nginx integration mode requires you to install and configure Nginx, the Standalone mode works as a single standalone server. Under the hood it still uses Nginx and things still work like in the previous diagram, but all the complexity is encapsulated in a single command on the command line.</li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a href="http://modrails.com/documentation/Users%20guide.html" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">The manual documents the differences between the multiple integration modes.</a> In this tutorial, we'll first introduce you to the Standalone mode because it's the easiest to work with. Then we'll slowly cover the other modes as well.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-what_passenger_doesnt_do" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#what-passenger-doesnt-do" name="user-content-what-passenger-doesnt-do" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>What Passenger doesn't do</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Passenger follows the Unix philosophy of doing a small number of things, but doing them well. So there are a number of things that are (currently) outside Passenger's scope. Passenger may or may not take care of some of these some time in the future.</p>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">Setting up a server with an operating system</strong><br style="box-sizing:border-box;"/>
Passenger assumes that you already have a server with an working operating system on it. Passenger is not a hosting service. It is software that is to be installed on a server.</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">Installing Node.js</strong><br style="box-sizing:border-box;"/>
To run Node.js apps on Passenger, you must already have Node.js installed. Passenger doesn't do that for you. Passenger doesn't care how you install Node.js though; you sometimes just need to tell Passenger where Node.js is.</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">Transferring the application code and files to the server</strong><br style="box-sizing:border-box;"/>
Passenger does not transfer the application code and files to the server for you. To do this, you must use tools like Git, scp, FTP, Capistrano, Fabric, etc. Passenger assumes that the application code and files are already on the server, and does not care which tool you use to make that so.</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">Installing application dependencies</strong><br style="box-sizing:border-box;"/>
Passenger does not install your application's dependencies for you.</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">Managing the database</strong><br style="box-sizing:border-box;"/>
If your application requires a database, then Passenger does not install that database for you, nor does it sets up database accounts and tables for you. They must already be set up by the time you deploy your application to Passenger.</li>
<li style="box-sizing:border-box;">
<strong style="box-sizing:border-box;font-weight:bold;">Managing auxiliary daemons and services</strong><br style="box-sizing:border-box;"/>
If your application requires additional daemons and services, e.g. Memcached or Redis, then Passenger does not manage those. They must already be running.</li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-getting_started" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h2 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.225;font-size:1.75em;position:relative;font-weight:bold;padding-bottom:0.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238, 238, 238);">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#2-getting-started" name="user-content-2-getting-started" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>2. Getting started</h2>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-installing" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#installing" name="user-content-installing" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Installing</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Visit <a href="https://www.phusionpassenger.com/download#open_source" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">the Phusion Passenger download page</a>. There are tailor-made, polished installation methods for OS X, Debian/Ubuntu, Heroku, etc. :)</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Make sure you get a version that is recent enough. This tutorial assumes at least version 4.0.37.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-prepare_your_app" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#prepare-your-app" name="user-content-prepare-your-app" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Prepare your app</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">One of the philosophies behind Phusion Passenger is <em style="box-sizing:border-box;">convention over configuration</em>. In practice, many web apps share many structural commonalities. For example, many web frameworks use <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>server.js<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> as the program's entry point, and most web apps have a directory in which they store static assets.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Phusion Passenger leverages this property to make your life easier. It assumes this convention by default. If your app follows these conventions then you get many features out of the box, without any configuration. If your app does not follow these coventions then you can still tell it what the structure actually is, by passing a few configuration options.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Here is the Phusion Passenger convention:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>application directory
  |
  +-- app.js
  |
  +-- public/
  |
  +-- tmp/
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">
<code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>app.js<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> is the entry point of your application. Phusion Passenger starts your application by loading that file. It must register a request handler, as documented later.</li>
<li style="box-sizing:border-box;">The <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>public<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> directory contains static files. All files in this directory are automatically served by the web server. For example, if there's a file <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>public/foo.jpg<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>, then any requests to <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>/foo.jpg<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> will be handled by the web server, and never passed to the application.</li>
<li style="box-sizing:border-box;">The <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>tmp<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> directory can be used by the application, but is also used by Phusion Passenger for restarting the application. By touching the file <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>tmp/restart.txt<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>, Phusion Passenger will restart the application on the next request. This seemingly strange mechanism comes from the fact that Phusion Passenger is designed to be friendly to shared hosters which only provide FTP access and no SSH access.</li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Perhaps your app only follows this convention partially, or perhaps not at all. For simplicity reasons, this tutorial will first cover apps that follow this convention, so for now please modify your app to fit this structure. This tutorial will later teach you how to make Passenger work with any structure.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-example_app" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#example-app" name="user-content-example-app" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Example app</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Let's create an example Node.js app directory structure:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>mkdir passenger_node_test
mkdir passenger_node_test/public
mkdir passenger_node_test/tmp
cd passenger_node_test
nano app.js
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Enter the following code for app.js. This small example application starts an HTTP server, and responds to every request with the message &quot;hello world!&quot;.</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>var http = require('http');
var server = http.createServer(function(req, res) {
    res.writeHead(200, { 'Content-Type': 'text/plain' });
    res.end(&quot;hello world!\n&quot;);
});
server.listen(3000);
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Now start your application inside Phusion Passenger's Standalone mode:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>$ passenger start
=============== Phusion Passenger Standalone web server started ===============
PID file: /Users/phusion/passenger_node_test/passenger.3000.pid
Log file: /Users/phusion/passenger_node_test/passenger.3000.log
Environment: development
Accessible via: http://0.0.0.0:3000/

You can stop Phusion Passenger Standalone by pressing Ctrl-C.
Problems? Check http://www.modrails.com/documentation/Users%20guide%20Standalone.html#troubleshooting
===============================================================================
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Open another terminal, and make a request to your app:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>$ curl http://0.0.0.0:3000/
hello world!
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-understanding_what_happened" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h2 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.225;font-size:1.75em;position:relative;font-weight:bold;padding-bottom:0.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238, 238, 238);">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#understanding-what-happened" name="user-content-understanding-what-happened" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Understanding what happened</h2>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">The previous instructions worked like magic, but what happened? Under the hood, Passenger took care of a lot of stuff for you, and there's a lot of complexity that Passenger is hiding for you. However you should have a good understanding of what Passenger does, so that you know what to do when there are problems.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">So here's a rundown of what happened earlier:</p>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">You created a Node.js application directory structure in the format Phusion Passenger expects it.</li>
<li style="box-sizing:border-box;">
<code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>app.js<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> is the entry point to your application.</li>
<li style="box-sizing:border-box;">Instead of running <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>node app.js<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>, you ran <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger start<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>. This command starts Phusion Passenger in its Standalone mode. The Standalone mode does not require Nginx or Apache.</li>
<li style="box-sizing:border-box;">Passenger is now serving and managing your application.</li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-port_binding" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#port-binding" name="user-content-port-binding" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Port binding</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">There is also some magic involved with regard to port binding. Normally, a Node.js app binds a server socket on a certain port by calling <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>listen()<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> on an <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>http.Server<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> object. But when run in Phusion Passenger, this control is inversed:</p>

<ol style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">The user tells Phusion Passenger which port to listen on (if not specified, port 3000 is chosen).</li>
<li style="box-sizing:border-box;">Phusion Passenger makes the Node.js app listen on some other, randomly available port.</li>
<li style="box-sizing:border-box;">Phusion Passenger forwards requests to Node.js. This is what allows Phusion Passenger to load balance between multiple Node.js processes.</li>
</ol><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Phusion Passenger implements this on the Node.js side by hooking into the first <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>http.Server<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> object in your app that calls <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>listen()<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>. That http.Server object will be selected as the server object to receive requests.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">When run in Phusion Passenger, the port number that you pass to <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>listen()<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> is irrelevant and has no effect. Instead of 3000 we could just as easily have written 4000. The fact that Phusion Passenger Standalone runs on port 3000 by default is not related to what you pass you <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>listen()<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">This means that most Node.js applications will work out of the box on Phusion Passenger, even if they are already configured to run on a specific port.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-changing_the_port" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#changing-the-port" name="user-content-changing-the-port" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Changing the port</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Since control is inversed, you -- the user -- control a lot of the operational parameters of your application by configuring Passenger. This also means that -- to a limited extend -- you don't have to write extra code to make your app configurable: Passenger already takes care of that for you.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Let's continue with some basic operational configuration. Passenger Standalone runs on port 3000 by default. You can tell it to run on another port by passing the <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>--port<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> option. Press Ctrl-C to stop your existing Passenger Standalone instance, and run:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>$ passenger start --port 3001
=============== Phusion Passenger Standalone web server started ===============
PID file: /Users/phusion/passenger_node_test/passenger.3001.pid
Log file: /Users/phusion/passenger_node_test/passenger.3001.log
Environment: development
Accessible via: http://0.0.0.0:3001/

You can stop Phusion Passenger Standalone by pressing Ctrl-C.
Problems? Check http://www.modrails.com/documentation/Users%20guide%20Standalone.html#troubleshooting
===============================================================================
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Let's try it out. Open another terminal and run:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>$ curl http://0.0.0.0:3001/
hello world!
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Voila, it worked! Notice that <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>app.js<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> still calls <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>listen(3000)<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>? As explained before, the argument passed to <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>listen()<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> doesn't have any effect. Only the <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>--port<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> option does.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-process_spawning" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#process-spawning" name="user-content-process-spawning" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Process spawning</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Remember the diagram from <a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#how_does_it_work" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">How does it work</a>? At its core, Passenger is a process manager and starts and stops Node.js processes for you. How can you see what processes are running? There's a tool for that! <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger-status<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> gives you an overview of all your processes, how much CPU and memory they're using, etc.</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>$ passenger-status
Version : 4.0.37
Date    : 2013-11-14 21:55:30 +0100
Instance: 25002
----------- General information -----------
Max pool size : 6
Processes     : 1
Requests in top-level queue : 0

----------- Application groups -----------
/Users/phusion/nodetestapp#default:
  App root: /Users/phusion/nodetestapp
  Requests in queue: 0
  * PID: 25012   Sessions: 0       Processed: 2       Uptime: 9s
    CPU: 0%      Memory  : 14M     Last used: 3s ago
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">By default, Passenger only starts a single Node.js process per application. We can use the <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>--min-instances<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> option to tell it to spawn more. Press Ctrl-C to stop your existing Passenger Standalone instance, and run:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>passenger start --port 3001 --min-instances 2
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Now open another terminal and run:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>$ passenger-status
Version : 4.0.37
Date    : 2013-11-14 21:58:20 +0100
Instance: 25019
----------- General information -----------
Max pool size : 6
Processes     : 1
Requests in top-level queue : 0

----------- Application groups -----------
/Users/phusion/nodetestapp#default:
  App root: /Users/phusion/nodetestapp
  Requests in queue: 0
  * PID: 25024   Sessions: 0       Processed: 1       Uptime: 9s
    CPU: 0%      Memory  : 14M     Last used: 3s ago
  * PID: 25025   Sessions: 0       Processed: 0       Uptime: 9s
    CPU: 0%      Memory  : 14M     Last used: 3s ago
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">As you can see, there are now two Node.js processes. Passenger automatically balances requests between the two of them.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-max_number_of_processes" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#maximum-number-of-processes" name="user-content-maximum-number-of-processes" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Maximum number of processes</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Passenger is designed to be <em style="box-sizing:border-box;">safe and robust</em> as well. That means it tries very hard not to overuse your server's resources and make it crash. For this reason, Passenger has a setting which controls the maximum number of application processes it may spawn. It will never spawn more than this number of processes unless you explicitly increase the limit. The limit is controlled with <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>--max-pool-size<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>, and at the time of writing (version 4.0.37) the default is 6.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">For example, try running:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>passenger start --min-instances 8
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">You will see that Passenger only spawns 6 processes, no more. The following lifts the limit:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>passenger start --min-instances 8 --max-pool-size 8
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">So what does this mean for you?</p>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">Each process can leverage a different CPU core. So spawning more processes allows you to leverage more cores.</li>
<li style="box-sizing:border-box;">It does not make sense to have more Node.js processes than the number of CPU cores.</li>
<li style="box-sizing:border-box;">If you spawn too many processes, your server may run out of memory, and processes will start becoming slow or start crashing. So keep an eye on your memory usage and decrease the number of processes if you notice that it's eating away your RAM.</li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">You might especially be interested in this article: <a href="http://blog.phusion.nl/2013/03/12/tuning-phusion-passengers-concurrency-settings/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Tuning Phusion Passenger's concurrency settings</a>.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-process_supervision" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#process-supervision" name="user-content-process-supervision" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Process supervision</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">The cool thing about Passenger is that it restarts processes that crash! Let's try it out. Tell Passenger to spawn two processes.</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>passenger start --min-instances 2
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Run <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger-status<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> and obtain the PID of a random process. Then kill that process to simulate a crash.</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>passenger-status
kill &lt;PID&gt;
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Wait a few seconds, and run <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger-status<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> again. Notice that the original process is gone, but that it has been replaced by another one!</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-characteristics_multi_process" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#the-characteristics-of-having-multiple-processes" name="user-content-the-characteristics-of-having-multiple-processes" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>The characteristics of having multiple processes</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">You've most likely only ever worked with a single Node.js process so far. Having multiple Node.js processes changes things somewhat. There are some strong caveats that you should be aware about.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">First, what is a process anyway other than an entry in <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>ps<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> or <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger-status<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>? A process is an instance of a computer program that is isolated from other processes. &quot;Isolated&quot; means that processes don't share memory with each other. Suppose that your program has a variable <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>A<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> with initial value <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>A = 1<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>. If you run two instances of your program -- two processes -- and you tell one process to set <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>A = 2<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>, then the value <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>2<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> is only visible to that process. The other process still thinks <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>A == 1<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>!</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">This is in contrast to threads. A thread runs inside a process, so if a thread changes a value, all other threads in the same process see the change.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">But you can't change variables in your program and expect all <em style="box-sizing:border-box;">processes</em> to see the changes. They don't. So how do you communicate changes to all your processes? By using a shared data store, which can be:</p>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">The database.</li>
<li style="box-sizing:border-box;">Redis.</li>
<li style="box-sizing:border-box;">Memcached.</li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Another characteristic about processes is that, if one process crashes, others are unaffected. This is also in contrast to threads: if a thread crashes and is unable to recover from the crash, then the entire process crashes with all its threads in it.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">This is why Passenger likes having multiple processes. If one process crashes, no problem, the other can (temporarily) take over while Passenger spawns a new one. This is also why Passenger itself is its own process: so that Node.js can't take down Passenger.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-node_env" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#node_env" name="user-content-node_env" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>NODE_ENV</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Many Node.js web frameworks use the NODE_ENV environment variable to determine whether they should operate in development or in production mode. Phusion Passenger automatically sets this environment variable.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">The Standalone mode is primarily meant to be a development tool, so it sets <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>NODE_ENV<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> to <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>development<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> by default. You can change this by passing <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>--environment<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>passenger start --environment production
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">As you will learn later, the Nginx integration mode and Apache integration mode are primarily meant for production, so they set <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>NODE_ENV<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> to <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>production<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> by default. You will later learn how to change the <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>NODE_ENV<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> value for those modes.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-further_configuration" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#further-configuration" name="user-content-further-configuration" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Further configuration</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">There are many more configuration options. Configuration depends on the integration mode. So far we've only covered the Standalone mode. You can learn more about configuring the Standalone mode in <a href="http://www.modrails.com/documentation/Users%20guide%20Standalone.html" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">the Passenger Standalone manual</a>.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">The Nginx integration mode and the Apache integration mode, which we're going to cover later in this tutorial, are configured differently. They too have <a href="http://www.modrails.com/documentation/Users%20guide.html" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">their own manuals</a> which cover configuration.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">If your app does not follow the convention laid out in <a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#prepare_your_app" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Prepare your app</a>, then you can tell Phusion Passenger about its structure by <a href="https://github.com/phusion/passenger/wiki/Free-style-Node.js-structure" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">following this guide</a>.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-deploying_to_production" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h2 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.225;font-size:1.75em;position:relative;font-weight:bold;padding-bottom:0.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238, 238, 238);">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#4-deploying-to-production" name="user-content-4-deploying-to-production" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>4. Deploying to production</h2>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#multiple_integration_modes" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">As mentioned before</a>, Passenger has multiple integration modes. You've only worked with the Standalone mode so far. All modes are fit for production, but you might prefer a specific mode in production. So let's go over them.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-deploying_standalone" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#deploying-standalone" name="user-content-deploying-standalone" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Deploying Standalone</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">If you have no experience with Nginx and Apache, then deploying the Standalone mode directly is by far the easiest. This way you don't have to deal with Nginx and Apache at all.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">On the downside - unless you're using the <a href="http://www.modrails.com/documentation/Users%20guide%20Standalone.html#mass_deployment" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Mass Deployment</a> feature in the <a href="https://www.phusionpassenger.com/enterprise" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Enterprise variant</a> - Passenger Standalone can only serve 1 Node.js application at the same time. Serving multiple applications at the same time requires you to start multiple Passenger Standalone instances, and to attach them to a reverse proxy. That makes things quite complicated, so if you want to serve multiple applications then you should use the Nginx or Apache integration mode.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Anyway, here's how you deploy a single Passenger Standalone instance to production.</p>

<ol style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">
<a href="https://www.phusionpassenger.com/download#open_source" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Install Phusion Passenger</a> on your server.</li>
<li style="box-sizing:border-box;">Copy over your application to your server and install its dependencies, set up a database for it, etc.</li>
<li style="box-sizing:border-box;">Login to your server and change the working directory to your application.</li>
<li style="box-sizing:border-box;">
<p style="box-sizing:border-box;margin-top:16px;margin-bottom:16px;">Run Passenger Standalone on port 80, and after binding to port 80, drop its privileges. Also tell it to start the app with <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>NODE_ENV=production<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>, and to daemonize into the background.</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>sudo passenger start --port 80 --user someusername --environment production --daemonize
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:16px;margin-bottom:16px;">Here, <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>someusername<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> should be the user that you want to run your application as. As a rule, never run your application as root. That is insecure!</p>
</li>
<li style="box-sizing:border-box;"><a href="http://www.modrails.com/documentation/Users%20guide%20Standalone.html#starting_at_system_boot" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Configure Passenger Standalone to start at boot.</a></li>
</ol><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-deploying_on_nginx_or_apache" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#deploying-on-nginx-or-apache" name="user-content-deploying-on-nginx-or-apache" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Deploying on Nginx or Apache</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">In the Nginx and Apache integration modes, Phusion Passenger acts as an Nginx or Apache module, so it is automatically started along with the web server. If you already have experience with Nginx or Apache then these modes are better suited for you. These modes make it trivial to serve multiple Node.js applications.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">First, <a href="https://www.phusionpassenger.com/download#open_source" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">install Phusion Passenger in Nginx or in Apache mode</a>. Deploying an app is then a matter of adding a virtual host entry in your web server, and telling the web server that it's a Phusion Passenger-served app.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Note that the document root must point to the <strong style="box-sizing:border-box;font-weight:bold;">public</strong> directory of the app! Suppose the app is located in <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>/webapps/foo<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>, then:</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Nginx:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>server {
    server_name www.foo.com;
    root /webapps/foo/public/;
    passenger_enabled on;
}
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Apache:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>&lt;VirtualHost *:80&gt;
    ServerName www.foo.com
    DocumentRoot /webapps/foo/public
&lt;/VirtualHost&gt;
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">If you visit <a href="http://www.foo.com/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">http://www.foo.com/</a> now (assuming that your system's DNS or /etc/hosts is configured to route to the web server in question), the request will be handled by your Node.js application.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-first_request_is_slower" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h4 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.4;font-size:1.25em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#the-first-request-is-slower" name="user-content-the-first-request-is-slower" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>The first request is slower</h4>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Notice that the first request that you made to <a href="http://www.foo.com/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">http://www.foo.com/</a> is slower than usual? That's because when run in the Nginx or Apache integration mode, your application is not started until the first request. You can make Passenger start your application during web server startup by using these configuration options:</p>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;"><a href="http://www.modrails.com/documentation/Users%20guide%20Nginx.html#PassengerPreStart" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">passenger_pre_start (Nginx)</a></li>
<li style="box-sizing:border-box;"><a href="http://www.modrails.com/documentation/Users%20guide%20Apache.html#PassengerPreStart" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">PassengerPreStart (Apache)</a></li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-node_env_production_default" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h4 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.4;font-size:1.25em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#node_env-is-set-to-production-by-default" name="user-content-node_env-is-set-to-production-by-default" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>NODE_ENV is set to production by default</h4>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">As mentioned earlier, the Nginx and Apache integration modes set <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>NODE_ENV<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> to <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>production<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> by default. You can set a different value by <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger_app_env<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> (Nginx) and <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>PassengerAppEnv<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> (Apache):</p>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger_app_env development<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code></li>
<li style="box-sizing:border-box;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>PassengerAppEnv development<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code></li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-configuring_nginx_apache_mode" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h4 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.4;font-size:1.25em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#configuration" name="user-content-configuration" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Configuration</h4>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">While the Standalone mode is usually configured through command line options, the Nginx/Apache integration modes are configured through the Nginx/Apache configuration files. There are many configuration options that you can tweak. For example you can set the number of processes you want, you can set a memory limit, etc. Please refer to <a href="http://www.modrails.com/documentation/Users%20guide.html" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">the Phusion Passenger manuals</a>.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-automatic_user_switching" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h4 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.4;font-size:1.25em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#automatic-user-switching" name="user-content-automatic-user-switching" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Automatic user switching</h4>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Nginx and Apache are usually configured to run as the <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>www<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> user. Does that mean your Node.js applications are also run as that user? The answer is no. Since Passenger was designed to be multitenant, we wouldn't want one Node.js application to be able to modify and mess with the files of another Node.js application on the same machine, especially not because of a vulnerability in the application. So running all Node.js applications under the same user as the web server would open a huge security hole.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Passenger has had a remedy for this problem since version 1.0, through the <a href="http://www.modrails.com/documentation/Users%20guide%20Nginx.html#user_switching" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Automatic User Switching</a> feature. Simply put, your Node.js application is run as the owner of <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>app.js<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>, unless you configure it otherwise. Of course you still have to make sure that each of your applications is owned by another user.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Note that Automatic User Switching is only supported in the Nginx and Apache integration modes, not in Standalone.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-restarting_an_app" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#redeploying-restarting-an-application" name="user-content-redeploying-restarting-an-application" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Redeploying (restarting) an application</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Suppose that you've deployed a new version of your application. The old version is still running, so how do you make it restart?</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">As explained in <a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#prepare_your_app" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Prepare your app</a>, you can trigger a restart by touching the file <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>tmp/restart.txt<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>. On the next request, your application will be restarted: the old processes will be gone, and Passenger will spawn new processes.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-using_passenger_in_dev" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h2 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.225;font-size:1.75em;position:relative;font-weight:bold;padding-bottom:0.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238, 238, 238);">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#5-using-passenger-in-development" name="user-content-5-using-passenger-in-development" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>5. Using Passenger in development</h2>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-should_use_passenger_in_development" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#should-passenger-be-used-in-development-as-well" name="user-content-should-passenger-be-used-in-development-as-well" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Should Passenger be used in development as well?</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">With all the focus on production, should Passenger be used during development as well? Yes it should!</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Let me be clear: you are in no way obliged to use Passenger in development. You can develop in pure Node.js, then deploy with Passenger. But it is generally a good idea to let your development environment match the production environment as closely as possible. Otherwise you may run into unexpected problems during production.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-restarting_on_every_request" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#restarting-your-application-on-every-request" name="user-content-restarting-your-application-on-every-request" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Restarting your application on every request</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Passenger also provides one nice development feature: the ability to restart your application on every request. If you're not using a Node.js framework that supports hot code reloading during development, then the mechanism that Passenger provides is a nice alternative.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">To activate this mechanism, create the file <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>tmp/always_restart.txt<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>. As long as the file exists, Passenger will restart your application on every request.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-caveats" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h2 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.225;font-size:1.75em;position:relative;font-weight:bold;padding-bottom:0.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238, 238, 238);">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#6-caveats" name="user-content-6-caveats" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>6. Caveats</h2>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-dont_mess_with_stdout_or_stderr" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#dont-mess-with-stdout-or-stderr" name="user-content-dont-mess-with-stdout-or-stderr" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Don't mess with stdout or stderr</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Phusion Passenger uses stdout and stderr to communicate with the application. It is safe for you to log messages to stdout and stderr, but don't do things like redirecting them to a file. Doing so will make Phusion Passenger think your app froze during startup, because it never receives a message back.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-close_event_not_work" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#the-close-event-might-not-work-as-expected" name="user-content-the-close-event-might-not-work-as-expected" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>The <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:inherit;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:inherit;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>close<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:inherit;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> event might not work as expected</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">If your app listens for the <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>close<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> event on requests, then you may find that the <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>close<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> event isn't fired when the client disconnects. For more information, please refer to <a href="http://stackoverflow.com/questions/24017770/event-stream-request-not-firing-close-event-under-passenger-apache/24067051#24067051" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">this StackOverflow question</a>.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-restarting_apps_that_serve_long_running_connections" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#restarting-apps-that-serve-websocket-or-other-long-running-connections" name="user-content-restarting-apps-that-serve-websocket-or-other-long-running-connections" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Restarting apps that serve WebSocket or other long-running connections</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">At the time of writing (September 15 2014), whenever you tell Phusion Passenger to restart an app, it will first wait for all its connections to terminate before actually restarting the app. The intention is to prevent clients from experiencing error messages. Unfortunately this does not work well with WebSockets or other long-running connections (e.g. long polling with long timeouts). When you try to restart an app that's currently serving such a long-running connection, you will see that Phusion Passenger waits indefinitely, until the connection terminates:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>----------- Application groups -----------
/Users/phusion/Sites/socketio.test#default:
  App root: /Users/phusion/Sites/socketio.test
  Requests in queue: 0
  * PID: 5542    Sessions: 1       Processed: 6       Uptime: 21s
    CPU: 0%      Memory  : 49M     Last used: 19s ago
    Shutting down...
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Phusion Passenger 4.0.52 introduces a <em style="box-sizing:border-box;">temporary</em> solution for this problem. By setting the <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>_PASSENGER_NODE_CONTROL_SERVER<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> environment variable, whenever you issue a restart command, Phusion Passenger will force the app to exit. All connections, both short-running connections (e.g. normal HTTP requests) and long-running connections, will be terminated.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Phusion Passenger 5 is going to introduce a cleaner solution, so that only long-running connections are aborted. Until then, this temporary solution is the way to go. This temporary solution will be removed once Phusion Passenger 5 is released, which is why environment variable name is prefixed with an underscore.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">To use it in Passenger Standalone, set the environment variable before invoking <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger start<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>export _PASSENGER_NODE_CONTROL_SERVER=1
passenger start ...
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">To use it in Phusion Passenger for Nginx, set the environment variable with <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger_set_cgi_param<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>server {
    listen 80;
    server_name ...;
    root ...;

    passenger_enabled on;
    passenger_set_cgi_param _PASSENGER_NODE_CONTROL_SERVER 1;
}
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">To use it in Phusion Passenger for Apache, set the environment variable with <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>SetEnv<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>:</p>

<pre style="box-sizing:border-box;overflow:auto;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;margin-top:0px;margin-bottom:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1.45;padding:16px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgb(247, 247, 247);word-wrap:normal;"><code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:inherit;padding:0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;word-break:normal;white-space:pre;border:0px;background:transparent;display:inline;word-wrap:normal;background-color:transparent;"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span>&lt;VirtualHost *:80&gt;
    ServerName ...
    DocumentRoot ...
    SetEnv _PASSENGER_NODE_CONTROL_SERVER 1
&lt;/VirtualHost&gt;
<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:100%;font-style:normal;font-variant:normal;font-weight:normal;line-height:inherit;white-space:pre;letter-spacing:-0.2em;">normal</span></code></pre>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-management_and_inspection" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h2 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.225;font-size:1.75em;position:relative;font-weight:bold;padding-bottom:0.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238, 238, 238);">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#7-management-and-inspection" name="user-content-7-management-and-inspection" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>7. Management and inspection</h2>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">The <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger-status<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> tool allows you to inspect Phusion Passenger and the currently application's state, such as what processes exist, how much memory and CPU they use, how many requests they've processed, etc. You've already been introduced to this tool in section <a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#understanding_what_happened" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Understanding what happened</a>.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Passenger-status has another mode, one for showing what requests are active and by which process. Run <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger-status --show=requests<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> to see all requests that are currently being handled.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">And there is another tool: <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>passenger-memory-stats<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>. This tool allows you to inspect the memory usage of all processes related to Phusion Passenger, including the web server, Phusion Passenger itself and the applications. The difference with passenger-status is:</p>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">passenger-status does not display the web server's memory usage.</li>
<li style="box-sizing:border-box;">passenger-status does not display the memory usage of internal Phusion Passenger processes.</li>
<li style="box-sizing:border-box;">The metrics displayed by passenger-status are gathered by internal Phusion Passenger processes that run in the background. passenger-memory-stats displays information by querying <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>ps<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>. If the Phusion Passenger internal processes are malfunctioning, then passenger-memory-stats still works.</li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-troubleshooting" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h2 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.225;font-size:1.75em;position:relative;font-weight:bold;padding-bottom:0.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238, 238, 238);">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#8-troubleshooting" name="user-content-8-troubleshooting" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>8. Troubleshooting</h2>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">If something doesn't work properly then the first place to look at is the global web server error log. This is because Phusion Passenger's stdout and stderr, as well as the stdout/stderr of all spawned applications, are redirected to the error log. You may find the error reason there.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">You can find the web server error log as follows:</p>

<ul style="box-sizing:border-box;padding:0px;margin-top:0px;margin-bottom:16px;padding-left:2em;">
<li style="box-sizing:border-box;">On Apache, this is the file that is configured in the global (<strong style="box-sizing:border-box;font-weight:bold;">not</strong> per-vhost) <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>ErrorLog<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> directive, and on most systems the default is <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>/var/log/apache2/error.log<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>.</li>
<li style="box-sizing:border-box;">On Nginx, this is the file that is configured in the global <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>error_log<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> directive. The <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>error_log<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> directive may also appear in the <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>http<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> section, but beware: that one is <em style="box-sizing:border-box;">not</em> the global error log. The default filename is <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>$PREFIX/logs/error.log<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> on self-compiled Nginx installations, where <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>$PREFIX<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code> is the prefix on which you configured Nginx. For example, if you configured Nginx with <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>--prefix=/opt/nginx<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>, then the default error log location is <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>/opt/nginx/logs/error.log<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>. If you installed Nginx with a native package (e.g. through APT or YUM) then the default filename is probably <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:normal;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span>/var/log/nginx/error.log<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;font-style:normal;font-variant:normal;font-weight:normal;line-height:normal;letter-spacing:-0.2em;"> </span></code>.</li>
</ul><p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Do you not see a useful message in the log file? Raise <a href="http://www.modrails.com/documentation/Users%20guide%20Apache.html#PassengerLogLevel" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">PassengerLogLevel</a> or <a href="http://www.modrails.com/documentation/Users%20guide%20Nginx.html#PassengerLogLevel" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">passenger_log_level</a> to see more verbose messages.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">If things still don't work, try consulting <a href="http://modrails.com/documentation/Users%20guide.html#troubleshooting" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">the Troubleshooting section in the manual</a>. Or you can consult one of the <a href="https://www.phusionpassenger.com/support" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">support resources</a>.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-conclusion" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h2 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.225;font-size:1.75em;position:relative;font-weight:bold;padding-bottom:0.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238, 238, 238);">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#9-conclusion" name="user-content-9-conclusion" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>9. Conclusion</h2>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-background" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#passengers-background-where-did-it-come-from" name="user-content-passengers-background-where-did-it-come-from" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Passenger's background: where did it come from?</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Phusion Passenger began in early 2008 was originally made to serve Ruby web applications. Since then, it has grown to be the most popular application server for Ruby. Unlike most Ruby application servers, both now and then, Phusion Passenger is designed to integrate with the web server, to take as much management work out of the administrator's hands, and generally to be &quot;zero-maintenance&quot;.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">But from the start, it was designed not to be Ruby-only. It was a little-known fact that Phusion Passenger also supported Python as early as mid-2008. Although we never marketed Python support and although we've always called our Python support &quot;experimental&quot;, hosting providers such as Dreamhost were already successfully using it in production for serving Django and other Python apps.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">In late 2012 we decided to raise Python support to a more official status, namely the beta status. In 2013, Python support was made production-ready, and Node.js and Meteor support were introduced.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-further_reading" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#further-reading" name="user-content-further-reading" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Further reading</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">Please take a look at <a href="https://www.phusionpassenger.com/documentation_and_support" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">the extensive documentation</a>. To stay up to date with the latest developments, please <a href="https://twitter.com/phusion_nl" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">follow us on Twitter</a> or <a href="http://blog.phusion.nl/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">follow the Phusion blog</a>.</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a name="user-content-feedback" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"></a></p>

<h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:16px;line-height:1.43;font-size:1.5em;position:relative;font-weight:bold;">
<a href="https://github.com/phusion/passenger/wiki/Phusion-Passenger%3A-Node.js-tutorial#your-feedback-is-valuable" name="user-content-your-feedback-is-valuable" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;position:absolute;top:0px;bottom:0px;left:0px;display:block;padding-right:6px;padding-left:30px;margin-left:-30px;"></a>Your feedback is valuable!</h3>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;">We'd like to hear from you if you're using Phusion Passenger to host Node.js apps! If there are any problems, or even if there are no problems, we'd like to know. Please send an email to <a href="http://groups.google.com/group/phusion-passenger" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">the community discussion forum</a>. Thank you!</p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:16px;"><a href="http://www.phusion.nl/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;"><img src="Phusion Passenger Node.js tutorial · phusionp_files/687474703a2f2f7777772e70687573696f6e2e6e6c2f6173736574732f6c6f676f2e706e67.png" type="image/png" height="33" style="box-sizing:border-box;border:0px;max-width:100%;" width="144"/></a></p>

<p style="box-sizing:border-box;margin-top:0px;margin-bottom:0px;">Please enjoy Phusion Passenger, a product by <a href="http://www.phusion.nl/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Phusion</a>. :-)</p>
    </div>

  </div>
  </div>
</div>
</div>


        </div>

      <span style="display:table;clear:both;"></span></div>
      
    <span style="display:table;clear:both;"></span></div>
  </div>


    </div>

      <div style="box-sizing:border-box;width:980px;margin-right:auto;margin-left:auto;"><span style="display:table;"></span>
  <div style="box-sizing:border-box;position:relative;margin-top:40px;padding-top:40px;padding-bottom:40px;font-size:12px;line-height:1.5;color:rgb(119, 119, 119);border-top-width:1px;border-top-style:solid;border-top-color:rgb(238, 238, 238);"><span style="font-size:12px;line-height:1.5;color:rgb(119, 119, 119);display:table;"></span>
    <ul style="box-sizing:border-box;padding:0px;float:right;margin:0px;list-style:none;">
      <li style="box-sizing:border-box;display:inline-block;line-height:16px;"><a href="https://status.github.com/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Status</a></li>
      <li style="box-sizing:border-box;display:inline-block;line-height:16px;margin-left:10px;"><a href="https://developer.github.com/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">API</a></li>
      <li style="box-sizing:border-box;display:inline-block;line-height:16px;margin-left:10px;"><a href="http://training.github.com/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Training</a></li>
      <li style="box-sizing:border-box;display:inline-block;line-height:16px;margin-left:10px;"><a href="http://shop.github.com/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Shop</a></li>
      <li style="box-sizing:border-box;display:inline-block;line-height:16px;margin-left:10px;"><a href="https://github.com/blog" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Blog</a></li>
      <li style="box-sizing:border-box;display:inline-block;line-height:16px;margin-left:10px;"><a href="https://github.com/about" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">About</a></li>

    </ul>

    <a href="https://github.com/" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">
      <span style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:24px;font-family:octicons;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;position:absolute;top:38px;left:50%;height:24px;width:24px;margin-left:-12px;color:rgb(204, 204, 204);" title="GitHub"><span style="font-style:normal;font-variant:normal;font-weight:normal;font-size:24px;font-family:octicons;line-height:1;color:rgb(204, 204, 204);"></span></span>
    </a>

    <ul style="box-sizing:border-box;padding:0px;margin:0px;list-style:none;">
      <li style="box-sizing:border-box;display:inline-block;line-height:16px;">© 2014 <span style="box-sizing:border-box;" title="0.02668s from github-fe120-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li style="box-sizing:border-box;display:inline-block;line-height:16px;margin-left:10px;"><a href="https://github.com/site/terms" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Terms</a></li>
        <li style="box-sizing:border-box;display:inline-block;line-height:16px;margin-left:10px;"><a href="https://github.com/site/privacy" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Privacy</a></li>
        <li style="box-sizing:border-box;display:inline-block;line-height:16px;margin-left:10px;"><a href="https://github.com/security" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Security</a></li>
        <li style="box-sizing:border-box;display:inline-block;line-height:16px;margin-left:10px;"><a href="https://github.com/contact" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Contact</a></li>
    </ul>
  <span style="font-size:12px;line-height:1.5;color:rgb(119, 119, 119);display:table;clear:both;"></span></div>
<span style="display:table;clear:both;"></span></div>


    



    


      
      
      
        

  


<div style="box-sizing:border-box;position:absolute;left:0px;top:-9999px;width:1px;height:1px;z-index:999999999;"></div></div></div></div><br/></div>
</div></body></html> 